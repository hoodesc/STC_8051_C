C51 COMPILER V9.06   LCD12864                                                              11/11/2016 10:24:40 PAGE 1   


C51 COMPILER V9.06, COMPILATION OF MODULE LCD12864
OBJECT MODULE PLACED IN .\Objects\LCD12864.obj
COMPILER INVOKED BY: D:\Keil uV5\C51\BIN\C51.EXE LCD12864.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\LCD12864.lst) TABS(2) OBJECT(.\Objects\LCD12864.obj)

line level    source

   1          #include <stc15.h>
   2          
   3          typedef unsigned char uchar;
   4          typedef unsigned int uint;
   5          
   6          uchar code TAB[] = "    PHICOMM";
   7          uchar code PHOTO[] = {
   8          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   9          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  10          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  13          0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  14          0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  15          0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  16          0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  17          0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  18          0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  19          0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  20          0x00,0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  21          0x00,0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  22          0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
  31          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
  32          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  34          0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  36          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,
  37          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,
  38          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  39          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  40          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  41          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,
  42          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,
  43          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,
  44          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,
  45          0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,
  46          0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,
  47          0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,
  48          0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,
  49          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,
  50          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,
  51          0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,
  52          0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  53          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  54          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.06   LCD12864                                                              11/11/2016 10:24:40 PAGE 2   

  55          0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  56          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  57          0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  58          0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  59          0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  60          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  61          0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  62          0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  63          0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  64          0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
  65          0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  66          0x00,0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  67          0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  68          0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  69          0x00,0x00,0x00,0x00,0x00,0x7F,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  70          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  72          };
  73          #define COM 0xF8      
  74          #define DAT 0xFA
  75          
  76          //sbit CS  = P3^3;  // 串行片选
  77          //sbit SID = P3^4;  // 串行数据
  78          //sbit CLK = P3^5;  // 串行时钟
  79          
  80          sbit CS  = P0^0;  // 串行片选
  81          sbit SID = P0^1;  // 串行数据
  82          sbit CLK = P0^2;  // 串行时钟
  83          
  84          void LCD_Write_Byte(uchar dat);
  85          void DelayMs(uchar time);
  86          void Photo(uchar *pPic);
  87          
  88          /*第一字节：串口控制―格式 11111ABC
  89          A 为数据传送方向控制：H 表示数据从 LCD 到 MCU，L 表示数据从 MCU 到 LCD
  90          B 为数据类型选择：H 表示数据是显示数据，L 表示数据是控制指令
  91          C 固定为 0
  92          */
  93          
  94          //  写数据函数
  95          void LCD_Write_Com(uchar com)
  96          {
  97   1        uchar MSB,LSB;
  98   1        MSB = (com & 0xF0);
  99   1        LSB = (com <<= 4);
 100   1        LCD_Write_Byte(COM);    // 写入指令
 101   1        LCD_Write_Byte(MSB);    // 写入指令高8位
 102   1        LCD_Write_Byte(LSB);    // 写入指令低8位
 103   1      }
 104          
 105          //  写指令函数
 106          void LCD_Write_Dat(uchar dat)
 107          {
 108   1        uchar MSB,LSB;
 109   1        MSB = (dat & 0xF0);
 110   1        LSB = (dat <<= 4);
 111   1        LCD_Write_Byte(DAT);    // 写入数据
 112   1        LCD_Write_Byte(MSB);    // 写入数据高8位
 113   1        LCD_Write_Byte(LSB);    // 写入数据低8位
 114   1      }
 115          
 116          //  写入一字节
C51 COMPILER V9.06   LCD12864                                                              11/11/2016 10:24:40 PAGE 3   

 117          void LCD_Write_Byte(uchar dat)
 118          {
 119   1        uchar i;
 120   1        for(i = 0; i < 8; i++)
 121   1        {
 122   2          CLK = 0;
 123   2          if(dat & 0x80)
 124   2            SID = 1;
 125   2          else
 126   2            SID = 0;
 127   2          CLK = 1;
 128   2          dat <<= 1;
 129   2        }
 130   1      }
 131          
 132          //void DecideBusyBit()
 133          //{
 134          //  CLK = 0;
 135          //  
 136          //}
 137          
 138          void LCD_XY(uchar x,y)
 139          {
 140   1        uchar uX,XY;
 141   1        if(1 == x)
 142   1          uX = 0x80;    // 第一行
 143   1        else if(2 == x)
 144   1          uX = 0x90;    // 第二行
 145   1        else if(3 == x)
 146   1          uX = 0x88;    // 第三行
 147   1        else if(4 == x)   
 148   1          uX = 0x98;    // 第四行
 149   1        XY = uX+y;
 150   1        LCD_Write_Com(XY);
 151   1      }
 152          
 153          void LCD12864_Init()
 154          {
 155   1        CS = 1;   
 156   1        LCD_Write_Com(0x30);    // 功能设置：基本指令
 157   1        DelayMs(10);
 158   1        LCD_Write_Com(0x01);    // 清屏
 159   1        DelayMs(10);
 160   1        LCD_Write_Com(0x0C);    // 显示状态：开显示，游标关闭
 161   1        DelayMs(10);  
 162   1      }
 163          
 164          //  11.0592Mhz延时函数，约1ms
 165          void DelayMs(uchar time)
 166          {
 167   1        uchar i,j;
 168   1        while(time--)
 169   1        {
 170   2          for(i = 0; i < 9; i++)
 171   2            for(j = 0; j < 177; j++);
 172   2        } 
 173   1      }
 174          
 175          void Photo(uchar *pPic)
 176          {
 177   1        uchar i,j;
 178   1        LCD_Write_Com(0x34);    // 扩充指令，关绘图显示
C51 COMPILER V9.06   LCD12864                                                              11/11/2016 10:24:40 PAGE 4   

 179   1        // 先写上半屏
 180   1        for(i = 0; i < 32; i++)
 181   1        {
 182   2          LCD_Write_Com(0x80 + i);  // 写水平坐标
 183   2          LCD_Write_Com(0x80);    // 写垂直坐标   
 184   2          for(j = 0; j < 16; j++)
 185   2          {
 186   3            LCD_Write_Dat(*pPic++); 
 187   3          }
 188   2        }
 189   1        // 再写下半屏
 190   1        for(i = 0; i < 32; i++)
 191   1        {
 192   2          LCD_Write_Com(0x80 + i);  // 写水平坐标
 193   2          LCD_Write_Com(0x88);    // 写垂直坐标   
 194   2          for(j = 0; j < 16; j++)
 195   2          {
 196   3            LCD_Write_Dat(*pPic++); 
 197   3          }
 198   2        }
 199   1        LCD_Write_Com(0x36);    // 扩充指令，开绘图显示
 200   1      
 201   1      
 202   1      
 203   1      }
 204          
 205          void main()
 206          {
 207   1        uchar i;
 208   1        DelayMs(10);
 209   1        LCD12864_Init();
 210   1        while(1)
 211   1        {
 212   2          Photo(PHOTO);
 213   2          while(1);
 214   2      //
 215   2      //    LCD_XY(1,0);  // 第一行第一列
 216   2      //    while(TAB[i] != '\0')
 217   2      //    {
 218   2      //      LCD_Write_Dat(TAB[i]);
 219   2      //      i++;
 220   2      //    }
 221   2          while(1);
 222   2        }
 223   1      }
*** WARNING C280 IN LINE 207 OF LCD12864.c: 'i': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    331    ----
   CONSTANT SIZE    =   1036    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
