C51 COMPILER V9.06   LCD12864                                                              11/29/2016 20:41:04 PAGE 1   


C51 COMPILER V9.06, COMPILATION OF MODULE LCD12864
OBJECT MODULE PLACED IN .\Output\LCD12864.obj
COMPILER INVOKED BY: D:\Keil uV5\C51\BIN\C51.EXE source code\LCD12864.c LARGE OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(.\inc
                    -lude;..\系统;.\source code) DEBUG PRINT(.\Listing\LCD12864.lst) TABS(2) OBJECT(.\Output\LCD12864.obj)

line level    source

   1          #include <STC15.h>
   2          #include "mytype.h"
   3          #include "LCD12864.h"
   4          #include "delay.h"
   5          
   6          uchar temp0[] = {"T:"};
   7          uchar temp1[] = {"MQ2:"};
   8          uchar temp2[] = {"火焰:"};
   9          
  10          //uchar code PHOTO[] = {
  11          //0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          //0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  13          //0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  14          //0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  15          //0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  16          //0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  17          //0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  18          //0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  19          //0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  20          //0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  21          //0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  22          //0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          //0x00,0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          //0x00,0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          //0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          //0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          //0x00,0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          //0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
  29          //0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
  30          //0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  31          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  32          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  33          //0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
  34          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
  35          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
  36          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  37          //0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  38          //0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  39          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,
  40          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,
  41          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  42          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  43          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  44          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,
  45          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,
  46          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,
  47          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,
  48          //0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,
  49          //0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,
  50          //0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,
  51          //0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,
  52          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,
  53          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,
  54          //0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.06   LCD12864                                                              11/29/2016 20:41:04 PAGE 2   

  55          //0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,
  56          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
  57          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
  58          //0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  59          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  60          //0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  61          //0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  62          //0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  63          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  64          //0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  65          //0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  66          //0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
  67          //0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
  68          //0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  69          //0x00,0x00,0x00,0x00,0x07,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  70          //0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  71          //0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          //0x00,0x00,0x00,0x00,0x00,0x7F,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  73          //0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  74          //0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  75          //};
  76          
  77          sbit LCD_RS = P1^1; //液晶：指令/数据选择信号 液晶第4脚
  78          sbit LCD_RW = P1^0; //液晶：读写选择信号    液晶第5脚
  79          sbit LCD_EN = P1^2; //液晶：读写选择信号    液晶第6脚
  80          
  81          void LCD_Write_com(uchar com)  //   写指令 
  82          {  
  83   1        LCD_RS=0;  
  84   1        P0=com;  
  85   1        DelayUs(5);  
  86   1        LCD_EN=1;  
  87   1        DelayUs(5);  
  88   1        LCD_EN=0; 
  89   1      }   
  90          void LCD_Write_data(uchar dat) // 写数据 
  91          {  
  92   1        LCD_RS=1;  
  93   1        P0=dat;  
  94   1        DelayUs(5);  
  95   1        LCD_EN=1;  
  96   1        DelayUs(5);  
  97   1        LCD_EN=0; 
  98   1      }   
  99          void LCD_Init() //初始化  
 100          {
 101   1        LCD_RW = 0; 
 102   1        LCD_EN=0;   
 103   1        LCD_Write_com(0x30);  //功能设定，基本指令集 
 104   1        DelayMs(10);  
 105   1        LCD_Write_com(0x01);  //清屏  
 106   1        DelayMs(10);  
 107   1        LCD_Write_com(0x0c);  //开显示  
 108   1        DelayMs(10);
 109   1        LCD_Display(1,0,&temp0);
 110   1        DelayUs(100);
 111   1        LCD_Display(2,0,&temp1);
 112   1        DelayUs(100); 
 113   1        LCD_Display(3,0,&temp2);  
 114   1      }
 115          
 116          void LCD_Display(uchar x,uchar y,uchar *pdat)
C51 COMPILER V9.06   LCD12864                                                              11/29/2016 20:41:04 PAGE 3   

 117          {
 118   1        uchar i = 0;
 119   1        LCD_XY(x,y);
 120   1        DelayUs(100);
 121   1        while(pdat[i] != '\0')
 122   1        {
 123   2          LCD_Write_data(pdat[i]);  
 124   2          i++;
 125   2          DelayUs(100);
 126   2        }
 127   1      }
 128          
 129          void LCD_XY(uchar x,y)
 130          {
 131   1        uchar uX,XY;
 132   1        if(1 == x)
 133   1          uX = 0x80;    // 第一行
 134   1        else if(2 == x)
 135   1          uX = 0x90;    // 第二行
 136   1        else if(3 == x)
 137   1          uX = 0x88;    // 第三行
 138   1        else if(4 == x)   
 139   1          uX = 0x98;    // 第四行
 140   1        XY = uX+y;
 141   1        LCD_Write_com(XY);
 142   1      }
 143          
 144          //void Photo(uchar *pPic)
 145          //{
 146          //  uchar i,j;
 147          //  LCD_Write_com(0x34);    // 扩充指令，关绘图显示
 148          //  DelayUs(200);
 149          //  // 先写上半屏
 150          //  for(i = 0; i < 32; i++)
 151          //  {
 152          //    LCD_Write_com(0x80 + i);  // 写水平坐标
 153          //    DelayUs(10);
 154          //    LCD_Write_com(0x80);    // 写垂直坐标   
 155          //    DelayUs(10);
 156          //    for(j = 0; j < 16; j++)
 157          //    {
 158          //      LCD_Write_data(*pPic++);  
 159          //      DelayUs(10);
 160          //    }
 161          //  }
 162          //  // 再写下半屏
 163          //  for(i = 0; i < 32; i++)
 164          //  {
 165          //    LCD_Write_com(0x80 + i);  // 写水平坐标
 166          //    DelayUs(10);
 167          //    LCD_Write_com(0x88);    // 写垂直坐标   
 168          //    DelayUs(10);
 169          //    for(j = 0; j < 16; j++)
 170          //    {
 171          //      LCD_Write_data(*pPic++);  
 172          //      DelayUs(10);
 173          //    }
 174          //  }
 175          //  LCD_Write_com(0x36);    // 扩充指令，开绘图显示
 176          //}
 177          
 178          //void main() 
C51 COMPILER V9.06   LCD12864                                                              11/29/2016 20:41:04 PAGE 4   

 179          //{
 180          //  uchar num;     
 181          //  LCD_Init();
 182          //  P0M1 = 0x00;
 183          //  P0M0 = 0x00;    
 184          //  for(num=0;num<6;num++)     
 185          //  {  
 186          //    LCD_Write_data(table[num]);  
 187          //    delay(200);  
 188          //  }  
 189          //  LCD_Write_com(0x81+0x10); // 换行
 190          //  for(num=0;num<11;num++) 
 191          //  {  
 192          //    LCD_Write_data(table1[num]); 
 193          //    delay(200); 
 194          //  }  
 195          //  while(1); //程序在此处停下  
 196          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    259    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     14       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
